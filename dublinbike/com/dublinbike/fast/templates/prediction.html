<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Prediction</title>
	<style>
	 
	</style>
	<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script  src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>  
	<link rel="stylesheet" href="../static/css/bootstrap.min.css" /> 
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
	<!-- bootstrap-css -->
	<link href="../static/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
	<!--// bootstrap-css -->
	<!-- css -->
	<link rel="stylesheet" href="../static/css/style.css" type="text/css" media="all" />
	<!--// css -->
	
	<!-- font-awesome icons -->
	<link href="../static/css/font-awesome.css" rel="stylesheet"> 
	<!-- //font-awesome icons -->
	<!-- font -->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700italic,700,400italic,300italic,300' rel='stylesheet' type='text/css'>
	<!-- //font -->
	<script src="../static/js/jquery-1.11.1.min.js"></script>
	<script src="../static/js/bootstrap.js"></script>
	<script src="../static/js/SmoothScroll.min.js"></script>
	<script src="../static/js/jarallax.js"></script>	
	</head>
	<body>
		<!-- banner -->
		<div class="banner bg-about">
			<div class="header-top about-header-top">
				<div class="container banner-drop">
					<div class="agile-logo">
						<h1><a href="/map">Dublin<span>Bike</span></a></h1>
					</div>
					<div class="header-right">
							<nav>
							  <ul>
								<li >
    							<a href="/map"><span>Home</span></a>
    						</li>
    						
    						<li class="active">
    							<a href="/prediction"><span>Prediction</span></a>
    						</li>
    						<li>
    							<a href="http://www.dublinbikes.ie/Stations"><span>Official Website</span></a>
    						</li>
                              <li>
    							<a href="http://www.dublinbikes.ie/"><span>Contact US</span></a>
    						</li>
    						<li>
    							<a href="#"><span>Sign up</span></a>
    						</li>
							<li>
								<a href="#"><span>Log in</span></a>
							</li>
							  </ul>
							</nav>
							<div class="menu-icon"><span></span></div>
					</div>
					<div class="clearfix"> </div>
					<script>
						(function($){
						  $(".menu-icon").on("click", function(){
								$(this).toggleClass("open");
								$(".container").toggleClass("nav-open");
								$("nav ul li").toggleClass("animate");
						  });
						  
						})(jQuery);
					</script>
				</div>
			</div>
			<div class="w3ls-heading">
				<h2>Prediction</h2>	
			</div>
		</div>
		<!-- //banner -->
		
		<!-- //select more detailed information -->
		<div class="services">
			<div class="container">
				<div class="w3-training-heading">
					<h2>Select Time and Station for Prediction</h2>
				</div>
				<form id="form_pre" onsubmit="return false" action="#" method="POST">
					<div style="padding: 8px 0">
						Date:&nbsp;<select name="date" id="in-date" style="width: 11%"></select>&nbsp;<br>
						Hour:&nbsp;<select name="hour" id="in-hour" style="width: 5%"></select>&nbsp;<br>
					
						Number:&nbsp;<select name="number"  style="width: 22%">
							<option value="106">No.106 RATHDOWN ROAD</option>
							<option value="108">No.108 AVONDALE ROAD</option>
							<option value="11">No.11 EARLSFORT TERRACE</option>
							<option value="112">No.112 NORTH CIRCULAR ROAD (O'CONNELL'S)</option>
							<option value="113">No.113 MERRION SQUARE SOUTH</option>
							<option value="114">No.114 WILTON TERRACE (PARK)</option>
							<option value="13">No.13 FITZWILLIAM SQUARE WEST</option>
							<option value="17">No.17 GOLDEN LANE</option>
							<option value="18">No.18 GRANTHAM STREET</option>
							<option value="23">No.23 CUSTOM HOUSE</option>
							<option value="30">No.30 PARNELL SQUARE NORTH</option>
							<option value="31">No.31 PARNELL STREET</option>
							<option value="32">No.32 PEARSE STREET</option>
							<option value="42">No.42 SMITHFIELD NORTH</option>
							<option value="43">No.43 PORTOBELLO ROAD</option>
							<option value="45">No.45 DEVERELL PLACE</option>
							<option value="48">No.48 EXCISE WALK</option>
							<option value="52">No.52 YORK STREET EAST</option>
							<option value="54">No.54 CLONMEL STREET</option>
							<option value="55">No.55 HATCH STREET</option>
							<option value="56">No.56 MOUNT STREET LOWER</option>
							<option value="6">No.6 CHRISTCHURCH PLACE</option>
							<option value="63">No.63 FENIAN STREET</option>
							<option value="67">No.67 THE POINT</option>
							<option value="68">No.68 HANOVER QUAY</option>
							<option value="72">No.72 JOHN STREET WEST</option>
							<option value="74">No.74 OLIVER BOND STREET</option>
							<option value="81">No.81 ST. JAMES HOSPITAL (CENTRAL)</option>
							<option value="84">No.84 BROOKFIELD ROAD</option>
							<option value="87">No.87 COLLINS BARRACKS MUSEUM</option>
							<option value="9">No.9 EXCHEQUER STREET</option>
							<option value="90">No.90 BENSON STREET</option>
							<option value="91">No.91 SOUTH DOCK ROAD</option>
							<option value="98">No.98 FREDERICK STREET SOUTH</option>
							<option value="99">No.99 CITY QUAY</option>
						</select>&nbsp;<br><br>
				
						<input id="subLogin" onclick="get_prediction()" type="submit" value="Click to Predict" style="border-radius:25px;border-style:solid;border-width:5px;border-color:#1a4a72">
					</div>
				</form>
				
			</div>
		</div>
		<!-- //select more detailed information -->
        <style>
         select {
         border: solid 2px #7A7A7A;
         padding-right: 14px;
         width: 215px;
         height: 23px;
         font-size: 15px;
         font-family: "Microsoft YaHei", "宋体";
         color: #1a4a72;
         padding-left: 2px;
         }
         </style>
		
		
		<!-- Information Bar -->
		<div class="w3layouts-training-top">
			<div class="container">
				<div class="w3-training-heading schedule-heading">
					<h3>Prediction Outcome</h3>
				</div>
				<div class="panel panel-primary">
				    <div id="title" class="panel-heading">
				        <h3 class="panel-title">The future data of Station is coming......(about 15 seconds to proceed)</h3>
				    </div>
					
				    <div id="prediction_info" class="panel-body">
				       <table class="table">
				               <th> Temperature</th><th>WeatherCondition</th><th>WindSpeed </th><th>AvailableStands</th><th>AvailableBikes</th>
				               <tr><td> </td><td> </td><td> </td><td> </td><td> </td></tr>
				               <tr><td> </td><td> </td><td> </td><td> </td><td> </td></tr>
				       </table>
				    </div>
				</div>
			</div>
		</div>
		<!-- //Information -->
		
		<!-- footer -->
		<div class="footer">
			<div class="container">
				<div class="agile-footer-grids">
					<div class="col-md-3 w3-agile-footer-grid">
						<h3>About</h3>
						<p>Some safety recommendations and helpful tips to travel with complete peace of mind around the city on dublinbikes.</p>
					</div>
					<div class="col-md-3 w3-agile-footer-grid">
						<h3>Events</h3>
						<ul>
							<li>March 29th 2020 <a href="http://www.dublinbikes.ie/Magazine/News/Covid-19-information-update-March-29th-2020">Covid-19 information</a></li>
    						<li>February 26th 2020<a href="http://www.dublinbikes.ie/Magazine/News/Temporary-Station-Closure-Notice">Temporary Station Closure</a></li>
    						<li>January 30th 2020 <a href="http://www.dublinbikes.ie/Magazine/News/Just-Eat-dublinbikes-Service-Update10">Dublinbikes Service Update</a></li>
    						<li>February 20th 2020 <a href="http://www.dublinbikes.ie/index.php/Magazine/News/Just-Eat-dublinbikes-intermittent-service-disruption">Dublinbikes intermittent service disruption</a></li>
    						<li>October 17th 2019 <a href="http://www.dublinbikes.ie/Magazine/News/Service-Update-KBC-Dublin-Marathon-2019">KBC Dublin Marathon</a></li>
						</ul>
					</div>
					<div class="col-md-3 w3-agile-footer-grid">
						<h3>Navigation</h3>
						<ul>
							<li class="text"><a href="/map">Home</a></li>
    						<li class="text"><a href="/prediction">Prediction</a></li>
    						<li class="text"><a href="http://www.dublinbikes.ie/">Official Website</a></li>
    						<li class="text"><a href="http://www.dublinbikes.ie/">Contact US</a></li>
    						<li class="text"><a href="/map">Sign up</a></li>
    						<li class="text"><a href="/map">Login in</a></li>
						</ul>
					</div>
					<div class="col-md-3 w3-agile-footer-grid">
						<h3>Newsletter</h3>
						<form action="#" method="post">
							<input type="email" id="mc4wp_email" name="EMAIL" placeholder="Enter your email here" required="">
							<input type="submit" value="Subscribe">
						</form>
					</div>
					<div class="clearfix"> </div>
				</div>
			</div>
		</div>
		<!-- //footer -->
		<div class="copyright">
			<div class="container">
				<p>Group Member: CHEN PENG, Yuhao Wnag, Junyi Zhang</p>
			</div>
		</div>


		<script>
            var day5='';
			var nowDate=new Date();
			for(var i=0 ;i<5;i++){
			    var str=getDateStr(nowDate.getTime()+1000*60*60*24*i);
			    if(i==4){
                    day5=str
				}
			    if (i==1){
                    document.querySelector('#in-date').innerHTML+='<option value="'+str+'" selected="selected">'+str+'</option>';
				} else{
                    document.querySelector('#in-date').innerHTML+='<option value="'+str+'">'+str+'</option>';
				}
			}
            getHour(24)

            document.querySelector('#in-date').addEventListener('change',function (val) {
				/* if (this.value==day5){
                    getHour(10)
				} else{ */
                    getHour(24)
				/* } */
            })
			
			function getHour(num) {
                document.querySelector('#in-hour').innerHTML=''
				for(var i=0;i<num;i++){
                    if (i==12){
                        document.querySelector('#in-hour').innerHTML+='<option value="'+i+'" selected="selected">'+i+'</option>';
                    } else{
                        document.querySelector('#in-hour').innerHTML+='<option value="'+i+'">'+i+'</option>';
                    }
				}
            }

			function getDateStr(date) {
			    var _date=new Date(date)
                var Y = _date.getFullYear();
                var M = (_date.getMonth()+1 < 10 ? '0'+(_date.getMonth()+1) : _date.getMonth()+1);
                var D = (_date.getDate() < 10 ? '0' + (_date.getDate()) : _date.getDate());
                return Y+'-'+M+'-'+D;
            }
		</script>
		<script>
		function get_prediction(){
			document.getElementById("title").innerHTML = "<h3 class='panel-title'>Calculating and Loading.............(Around 15s)</h3>"
			var Data = $("#form_pre").serializeArray();
			var Pram = {};		

			for(var i =0;i < Data.length;i++)
				 {
				 	Pram[Data[i].name] = Data[i]['value'];
				 }
			number = Pram["number"]
			title = "<h3 class='panel-title'>The future data of Station: No."+number+'</h3>'
			$.ajax({
	                type: 'POST',
	                dataType: 'json',
	                url: '/check_prediction' ,
	                contentType: 'application/json; charset=UTF-8',
	                data: JSON.stringify(Pram),
	                success: function (result) {
	                    console.log(result);
	                    info = "<table class='table'>"+
			               "<th> Temperature</th><th>WeatherCondition</th><th>WindSpeed </th><th>AvailableStands</th><th>AvailableBikes</th>"+
			               "<tr><td>"+result["temp"]+" </td><td>"+result["condition"]+"</td><td>"+result["wind"]+" </td><td>"+result["prediction_stands"]+" </td><td>"+result["prediction_bikes"]+" </td></tr>"+
			               "</table>";
	                    
	                    document.getElementById("prediction_info").innerHTML = info;
	                    document.getElementById("title").innerHTML = title;
	                },
	                error : function() {
	                    alert("Error");
	                }
	            });
		}
		
		
		</script>
		
	</body>
</html>
